<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
    
    <!-- Security and Extension Compatibility Meta Tags -->
    <!-- X-Frame-Options removed to allow Farcaster embedding -->
    <meta http-equiv="X-Content-Type-Options" content="nosniff" />
    <meta http-equiv="Referrer-Policy" content="strict-origin-when-cross-origin" />
    
    <!-- Enhanced Content Security Policy for Wallet Extensions and Farcaster - ALLOW ALL FRAME ANCESTORS -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval'; script-src 'self' 'unsafe-inline' 'unsafe-eval' chrome-extension: moz-extension: safari-extension: https: data: blob:; style-src 'self' 'unsafe-inline' https: data:; img-src 'self' data: https: http: chrome-extension: moz-extension: safari-extension: blob:; connect-src 'self' https: http: wss: ws: chrome-extension: moz-extension: safari-extension: data: blob:; frame-src 'self' chrome-extension: moz-extension: safari-extension: https: data:; frame-ancestors *; worker-src 'self' blob:; child-src 'self' blob:; object-src 'none'; base-uri 'self'; form-action 'self' https:;" />
    
    <!-- App Meta Tags - Synchronized with farcaster.json -->
    <title>TravelMint - Travel Photo NFT Marketplace</title>
    <meta name="description" content="Mint, buy, and sell location-based travel photo NFTs. Create unique travel memories on the blockchain with GPS coordinates and discover NFTs on an interactive map." />
    <meta name="keywords" content="travel, nft, blockchain, photography, base, travel photos, location nfts, gps coordinates, cryptocurrency, digital collectibles" />
    <meta name="author" content="TravelMint" />
    <meta name="subtitle" content="Travel Photo NFT Marketplace" />
    <meta name="tagline" content="Turn travel into NFTs" />
    
    <!-- Canonical URL -->
    <link rel="canonical" href="https://travelmint.app" />
    
    <!-- Open Graph Meta Tags - Synchronized with farcaster.json -->
    <meta property="og:title" content="TravelMint NFT App" />
    <meta property="og:description" content="Mint, buy, and sell location-based travel photo NFTs on Base blockchain" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://travelmint.app" />
    <meta property="og:site_name" content="TravelMint" />
    <meta property="og:locale" content="en_US" />
    
    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="TravelMint NFT App" />
    <meta name="twitter:description" content="Mint, buy, and sell location-based travel photo NFTs on Base blockchain" />
    <meta name="twitter:site" content="@TravelMint" />
    <meta name="twitter:creator" content="@TravelMint" />
    
    <!-- Theme and App Meta Tags -->
    <meta name="theme-color" content="#0f172a" />
    <meta name="msapplication-TileColor" content="#0f172a" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="TravelMint" />
    
    <!-- Base App Integration Meta Tags -->
    <meta name="noindex" content="false" />
    <meta name="robots" content="index, follow" />
    <meta name="primaryCategory" content="social" />
    
    <!-- Enhanced Farcaster Frame Meta Tags - Synchronized with farcaster.json -->
    <meta name="fc:frame" content="vNext" />
    <meta name="fc:frame:image" id="fc-frame-image" content="/image.png" />
    <meta name="fc:frame:button:1" content="ðŸ—ºï¸ Explore NFTs" />
    <meta name="fc:frame:button:1:action" content="link" />
    <meta name="fc:frame:button:1:target" id="fc-explore-target" content="/explore" />
    <meta name="fc:frame:button:2" content="ðŸ“¸ Mint Travel NFT" />
    <meta name="fc:frame:button:2:action" content="link" />
    <meta name="fc:frame:button:2:target" id="fc-mint-target" content="/mint" />
    
    <!-- Additional Farcaster Discovery Meta Tags -->
    <meta name="fc:app:name" content="TravelMint" />
    <meta name="fc:app:description" content="Mint, buy, and sell location-based travel photo NFTs. Create unique travel memories on the blockchain with GPS coordinates and discover NFTs on an interactive map." />
    <meta name="fc:app:tagline" content="Turn travel into NFTs" />
    <meta name="fc:app:subtitle" content="Travel Photo NFT Marketplace" />
    <meta name="fc:app:tags" content="travel,nft,blockchain,photography,base" />
    <meta name="fc:app:category" content="social" />
    <meta name="fc:app:version" content="1" />
    
    <!-- Farcaster Mini App Discovery Tags with Mobile Detection -->
    <script>
      // Update Farcaster meta tags with current domain
      if (typeof window !== 'undefined') {
        const currentUrl = window.location.origin;
        // FORCE mobile mode for ALL frames - ultra-safe approach
        const userAgent = navigator.userAgent || '';
        const isFrame = window.parent !== window;
        
        // If it's a frame OR any mobile indicators, treat as mobile
        const isMobile = isFrame || 
                        userAgent.includes('Farcaster') || 
                        userAgent.includes('Mobile') || 
                        userAgent.includes('Android') || 
                        userAgent.includes('iPhone') ||
                        userAgent.includes('iPad') ||
                        /Mobi|Android|iPhone|iPad/i.test(userAgent) ||
                        'ontouchstart' in window;
                        
        console.log('ðŸ“± HTML Detection - Frame:', isFrame, 'Mobile:', isMobile);
        
        // ULTRA-AGGRESSIVE: Skip ALL splash screens instantly
        if (isFrame) {
          console.log('âš¡ NO SPLASH: Instant frame loading');
          
          // Wait for DOM to be ready before manipulating
          const hideSplash = () => {
            try {
              if (document.body) {
                document.body.style.visibility = 'visible';
                document.body.style.opacity = '1';
              }
              if (document.documentElement) {
                document.documentElement.style.visibility = 'visible';
                document.documentElement.style.opacity = '1';
              }
              
              // Force hide splash overlay with CSS
              const style = document.createElement('style');
              style.textContent = `
                [class*="splash"], [id*="splash"], 
                [class*="loading"], [id*="loading"],
                .farcaster-splash, .frame-splash,
                div[style*="position: fixed"][style*="z-index"] {
                  display: none !important;
                  opacity: 0 !important;
                  visibility: hidden !important;
                  pointer-events: none !important;
                }
              `;
              document.head.appendChild(style);
              
              // Remove splash elements from DOM
              setTimeout(() => {
                const splashElements = document.querySelectorAll('[class*="splash"], [id*="splash"], [class*="loading"], [id*="loading"]');
                splashElements.forEach(el => el.remove());
                
                // Tell parent frame to hide splash
                window.parent?.postMessage({ type: 'HIDE_SPLASH', action: 'force_hide' }, '*');
                window.parent?.postMessage({ type: 'farcaster_frame_ready', ready: true }, '*');
              }, 50);
              
            } catch (error) {
              console.log('ðŸ”§ DOM not ready yet, retrying...');
              setTimeout(hideSplash, 10);
            }
          };
          
          // Start immediately and retry if needed
          hideSplash();
          
          // Immediate ready message - multiple attempts
          console.log('ðŸš€ Posting instant ready message (no splash delay)');
          const sendReady = () => {
            if (window.parent && window.parent.postMessage) {
              window.parent.postMessage({ 
                type: 'FRAME_READY_INSTANT', 
                source: 'TravelMint',
                strategy: 'no-splash-instant',
                splashSkipped: true,
                autoReady: true
              }, '*');
            }
          };
          
          // Send ready multiple times with different delays
          sendReady();
          setTimeout(sendReady, 0);
          setTimeout(sendReady, 1);
          setTimeout(sendReady, 10);
        }
        
        // NUCLEAR CACHE BUSTING - Mobile app cache destroyer
        const timestamp = Date.now();
        const randomId = Math.random().toString(36).substr(2, 15);
        const nanoTime = performance.now().toString().replace('.', '');
        const sessionId = Math.random().toString(36).substr(2, 10);
        const version = isMobile ? 'mobile' : 'desktop';
        const cacheParam = `?v=${version}&cb=${timestamp}&r=${randomId}&nano=${nanoTime}&session=${sessionId}&mobile=1&bust=${Date.now()}`;
        
        // Update frame image URLs
        const frameImage = document.getElementById('fc-frame-image');
        if (frameImage) frameImage.content = currentUrl + '/image.png' + cacheParam;
        
        // Update button targets
        const exploreTarget = document.getElementById('fc-explore-target');
        if (exploreTarget) exploreTarget.content = currentUrl + '/explore';
        
        const mintTarget = document.getElementById('fc-mint-target');
        if (mintTarget) mintTarget.content = currentUrl + '/mint';
        
        // Mobile gets instant-load background
        const splashBg = isMobile ? '#000014' : '#0f172a';
        
        // Update dynamic OG and Twitter meta tags
        const updateMetaTag = (property, content) => {
          let meta = document.querySelector(`meta[property="${property}"], meta[name="${property}"]`);
          if (meta) {
            meta.content = content;
          }
        };
        
        updateMetaTag('og:image', currentUrl + '/image.png' + cacheParam);
        updateMetaTag('og:url', currentUrl);
        updateMetaTag('twitter:image', currentUrl + '/image.png' + cacheParam);
        updateMetaTag('twitter:url', currentUrl);
        
        // Create enhanced mini app meta tag with all farcaster.json data
        const miniappMeta = document.createElement('meta');
        miniappMeta.name = 'fc:miniapp';
        miniappMeta.content = JSON.stringify({
          "version": "1",
          "name": "TravelMint",
          "subtitle": "Travel Photo NFT Marketplace",
          "description": "Mint, buy, and sell location-based travel photo NFTs. Create unique travel memories on the blockchain with GPS coordinates and discover NFTs on an interactive map.",
          "tagline": "Turn travel into NFTs",
          "imageUrl": currentUrl + "/image.png" + cacheParam,
          "iconUrl": currentUrl + "/icon.png" + cacheParam,
          "button": {
            "title": "âš¡ Open",
            "action": {
              "type": "link",
              "name": "TravelMint",
              "url": currentUrl,
              "splashImageUrl": null,
              "splashBackgroundColor": null,
              "skipSplash": true,
              "loadingTimeout": 0,
              "autoReady": true,
              "disableSplash": true,
              "hideSplash": true,
              "autoStart": true
            }
          },
          "tags": ["travel", "nft", "blockchain", "photography", "base"],
          "category": "social",
          "mobileOptimized": true
        });
        document.head.appendChild(miniappMeta);
      }
    </script>
    
    <!-- Add custom CSS for splash screen positioning -->
    <style>
      /* Custom splash screen styles for full-screen optimization */
      @media (max-width: 768px) {
        .fc-splash-container {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          width: 100vw !important;
          height: 100vh !important;
          background-color: #0f172a !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          z-index: 9999 !important;
        }
        
        .fc-splash-image {
          max-width: 90vw !important;
          max-height: 90vh !important;
          width: auto !important;
          height: auto !important;
          object-fit: contain !important;
        }
      }
      
      /* Desktop splash screen optimization */
      @media (min-width: 769px) {
        .fc-splash-container {
          position: fixed !important;
          top: 0 !important;
          left: 0 !important;
          width: 100vw !important;
          height: 100vh !important;
          background-color: #0f172a !important;
          display: flex !important;
          align-items: center !important;
          justify-content: center !important;
          z-index: 9999 !important;
        }
        
        .fc-splash-image {
          max-width: 60vw !important;
          max-height: 60vh !important;
          width: auto !important;
          height: auto !important;
          object-fit: contain !important;
        }
      }
    </style>
    
    <!-- Favicon and App Icons with ULTRA Aggressive Cache Busting -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="icon" type="image/x-icon" href="/favicon.ico?v=NEWICON2&bust=1757003000&reload=force&t=2025090420&new=true" />
    <link rel="icon" type="image/png" sizes="192x192" href="/icon.png?v=NEWICON2&bust=1757003000&reload=force&t=2025090420&new=true" />
    <link rel="icon" type="image/png" sizes="32x32" href="/icon.png?v=NEWICON2&bust=1757003000&reload=force&t=2025090420&new=true" />
    <link rel="apple-touch-icon" href="/icon.png?v=NEWICON2&bust=1757003000&reload=force&t=2025090420&new=true" />
    <link rel="manifest" href="/manifest.json?v=NEWICON2&bust=1757003000" />
    <meta name="theme-color" content="#0f172a" />
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="TravelMint - Travel Photo NFT Marketplace" />
    <meta property="og:description" content="Mint, buy, and sell location-based travel photo NFTs on Base blockchain" />
    <meta property="og:image" content="https://travelnft.vercel.app/image.png" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://travelnft.vercel.app" />
    <meta property="og:site_name" content="TravelMint" />
    
    <!-- Twitter Card Tags -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="TravelMint - Travel Photo NFT Marketplace" />
    <meta name="twitter:description" content="Turn your travel memories into NFTs" />
    <meta name="twitter:image" content="https://travelnft.vercel.app/image.png" />
    
    <!-- Additional Base App Meta Tags -->
    <meta name="keywords" content="travel, nft, blockchain, photography, base, web3, social, map, location" />
    <meta name="author" content="TravelMint" />
    <meta name="application-name" content="TravelMint" />
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Architects+Daughter&family=DM+Sans:ital,opsz,wght@0,9..40,100..1000;1,9..40,100..1000&family=Fira+Code:wght@300..700&family=Geist+Mono:wght@100..900&family=Geist:wght@100..900&family=IBM+Plex+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=IBM+Plex+Sans:ital,wght@0,100..700;1,100..700&family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Lora:ital,wght@0,400..700;1,400..700&family=Merriweather:ital,opsz,wght@0,18..144,300..900;1,18..144,300..900&family=Montserrat:ital,wght@0,100..900;1,100..900&family=Open+Sans:ital,wght@0,300..800;1,300..800&family=Outfit:wght@100..900&family=Oxanium:wght@200..800&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Plus+Jakarta+Sans:ital,wght@0,200..800;1,200..800&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto+Mono:ital,wght@0,100..700;1,100..700&family=Roboto:ital,wght@0,100..900;1,100..900&family=Source+Code+Pro:ital,wght@0,200..900;1,200..900&family=Source+Serif+4:ital,opsz,wght@0,8..60,200..900;1,8..60,200..900&family=Space+Grotesk:wght@300..700&family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
  </head>
  <body>
    <!-- FRAME DEBUG: Raw HTML fallback -->
    <div id="frame-debug" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: #ffff00; color: black; font-size: 18px; padding: 20px; z-index: 1000000; display: none;">
      ðŸŸ¡ RAW HTML FALLBACK<br>
      This is pure HTML - no React, no CSS classes<br>
      If you see this YELLOW background, HTML works but React doesn't
    </div>
    
    <!-- EMERGENCY MOBILE DEBUG -->
    <div id="mobile-test" style="position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: #0f172a; color: white; z-index: 999999; font-size: 20px; text-align: center; padding: 30px; box-sizing: border-box;">
      <h1 style="color: #3b82f6; margin: 20px 0;">ðŸš€ TravelMint Mobile Test</h1>
      <p style="color: white; margin: 15px 0;">If you see this dark screen, HTML/CSS works!</p>
      <p style="color: #22c55e; margin: 15px 0;">âœ… Mobile frame is loading correctly</p>
      <button onclick="document.getElementById('mobile-test').style.display='none';" style="background: #3b82f6; color: white; padding: 12px 24px; border: none; border-radius: 6px; font-size: 16px; margin: 20px; cursor: pointer;">Hide This & Show App</button>
    </div>
    
    <div id="root" style="background: #0f172a; color: white; min-height: 100vh;"></div>
    <script type="module" src="/src/main.tsx"></script>
    
    <!-- Frame emergency script - removed for normal operation -->
    <!-- This is a replit script which adds a banner on the top of the page when opened in development mode outside the replit environment -->
    <script type="text/javascript" src="https://replit.com/public/js/replit-dev-banner.js"></script>
  </body>
</html>